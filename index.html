<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brainrot Shop</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #111; color: #fff; }
    header { padding: 20px; background: #222; text-align: center; font-size: 2rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; padding: 20px; }
    .item { background: #1a1a1a; padding: 10px; border-radius: 12px; text-align: center; font-size: 0.9rem; }
    .item img { width: 100%; max-height: 120px; object-fit: contain; border-radius: 8px; }
    button { margin-top: 8px; padding: 6px 12px; border: none; background: #ff3cc7; color: #000; font-weight: bold; border-radius: 6px; cursor: pointer; font-size: 0.9rem; }
    button:hover { opacity: 0.8; }
    #adminPanel { display:none; position:fixed; top:20px; right:20px; background:#222; padding:20px; border-radius:12px; width:300px; box-shadow:0 0 10px #000; z-index:1000; }
  </style>
</head>
<body>
  <header>Brainrot Shop</header>

  <div class="grid" id="grid"></div>

  <div id="adminPanel">
    <h2>Admin Panel</h2>
    <h3>Page Settings</h3>
    <label>Background Color:<br><input id="bgColor" type="text" placeholder="#111" style="width:100%"></label><br><br>
    <button onclick="changeBG()">Apply Background</button>
    <hr style="margin:15px 0; border-color:#444;">

    <h3>Search Items</h3>
    <input id="searchBox" type="text" placeholder="Search items..." oninput="searchItems()" style="width:100%; margin-bottom:10px;">
    <hr style="margin:15px 0; border-color:#444;">

    <h3>Add / Edit Items</h3>
    <label>Name:<br><input id="itemName" type="text" style="width:100%"></label><br><br>
    <label>Price:<br><input id="itemPrice" type="number" style="width:100%"></label><br><br>
    <label>Image URL:<br><input id="itemImage" type="text" style="width:100%"></label><br><br>

    <button onclick="addItem()">Add Item</button>
    <br><br>
    <button onclick="removeLastItem()">Remove Last Item</button>
    <br><br>
    <button onclick="saveEdit()">Save Edit</button>
  </div>

  <script>
  let __ctrlPressed=false, __endPressed=false;

  document.addEventListener('keydown',(e)=>{
    if(e.key==='Control') __ctrlPressed=true;
    if(e.key==='End') __endPressed=true;
    if(__ctrlPressed && __endPressed){
      const panel=document.getElementById('adminPanel');
      panel.style.display=panel.style.display==='none'?'block':'none';
      __ctrlPressed=false;
      __endPressed=false;
    }
  });

  document.addEventListener('keyup',(e)=>{
    if(e.key==='Control') __ctrlPressed=false;
    if(e.key==='End') __endPressed=false;
  });

  function changeBG(){
    const color=document.getElementById('bgColor').value;
    if(color) document.body.style.background=color;
  }

  function searchItems(){
    const term=document.getElementById('searchBox').value.toLowerCase();
    document.querySelectorAll('.item').forEach(i=>{
      const name=i.querySelector('h3').textContent.toLowerCase();
      i.style.display=name.includes(term)?'block':'none';
    });
  }

  function addItem(){
    const name=document.getElementById('itemName').value;
    const price=document.getElementById('itemPrice').value;
    const img=document.getElementById('itemImage').value;
    if(!name||!price||!img) return alert('Fill all fields');
    const grid=document.getElementById('grid');
    const div=document.createElement('div');
    div.className='item';
    div.innerHTML=`<img src="${img}" alt="Brainrot Item" /><h3>${name}</h3><p>$${price}</p><button>Buy Now</button>`;
    grid.appendChild(div);
    div.addEventListener('click',()=>editItem(div));

    // Save to localStorage for global persistence
    const items=JSON.parse(localStorage.getItem('brainrots')||'[]');
    items.push({name,price,img});
    localStorage.setItem('brainrots',JSON.stringify(items));
  }

  function loadItems(){
    const items=JSON.parse(localStorage.getItem('brainrots')||'[]');
    const grid=document.getElementById('grid');
    items.forEach(it=>{
      const div=document.createElement('div');
      div.className='item';
      div.innerHTML=`<img src="${it.img}" alt="Brainrot Item" /><h3>${it.name}</h3><p>$${it.price}</p><button>Buy Now</button>`;
      grid.appendChild(div);
      div.addEventListener('click',()=>editItem(div));
    });
  }

  function removeLastItem(){
    const grid=document.getElementById('grid');
    if(grid.lastElementChild){
      grid.removeChild(grid.lastElementChild);
      const items=JSON.parse(localStorage.getItem('brainrots')||'[]');
      items.pop();
      localStorage.setItem('brainrots',JSON.stringify(items));
    }
  }

  let __editingItem=null;
  function editItem(div){
    document.getElementById('itemName').value=div.querySelector('h3').textContent;
    document.getElementById('itemPrice').value=div.querySelector('p').textContent.replace('$','');
    document.getElementById('itemImage').value=div.querySelector('img').src;
    __editingItem=div;
  }

  function saveEdit(){
    if(!__editingItem) return alert('No item selected');
    const name=document.getElementById('itemName').value;
    const price=document.getElementById('itemPrice').value;
    const img=document.getElementById('itemImage').value;
    __editingItem.querySelector('h3').textContent=name;
    __editingItem.querySelector('p').textContent=`$${price}`;
    __editingItem.querySelector('img').src=img;

    // Update localStorage
    const grid=document.getElementById('grid');
    const items=[];
    grid.querySelectorAll('.item').forEach(it=>{
      items.push({
        name: it.querySelector('h3').textContent,
        price: it.querySelector('p').textContent.replace('$',''),
        img: it.querySelector('img').src
      });
    });
    localStorage.setItem('brainrots',JSON.stringify(items));
  }

  // Load items on page load
  loadItems();
  </script>
</body>
</html>
